<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Summernote Editor</title>
    <!-- <link href="%SUMMERNOTE_LITE_CSS_URL%" type="text/css" rel="stylesheet"> -->
    <script src="%SUMMERNOTE_LITE_JS_URL%"></script>
    <style>
        html,
        body {
            height: 100%;
            margin: 0;
        }

        body {
            display: flex;
            flex-direction: column;
        }

        /* main editor component */
        #editor {
            flex: 1;
            overflow: auto;
        }
    </style>
</head>

<body>
    <div id="editor"></div>
    <script>

        // Initialisierung hier
        const jodit = new Jodit('#editor', {
            "defaultFontSizePoints": "pt",
            "uploader": {
                "insertImageAsBase64URI": true
            },
            "height": "100%",
            "triggerChangeEvent": true,
            "disablePlugins": "source,copy-format,preview,print,video,file,media,sticky,fullsize,about",
            "toolbarButtonSize": "small",
            "language": "%I18N%",
            
            "buttons": [
                'paragraph', '|',
                'bold',
                'strikethrough',
                'underline',
                'italic', '|',
                'ul',
                'ol', '|',
                'outdent', 'indent', '|',
                'font',
                'fontsize',
                'brush',
                'image',
                'table',
                'link', '|',
                'align', 'undo', 'redo', '|',
                'hr',
                'eraser', '|',
                'symbol'
            ],
            "buttonsMD": [
                'paragraph', '|',
                'bold',
                'strikethrough',
                'underline',
                'italic', '|',
                'ul',
                'ol', '|',
                'outdent', 'indent', '|',
                'font',
                'fontsize',
                'brush',
                'image',
                'table',
                'link', '|',
                'align', 'undo', 'redo', '|',
                'hr',
                'eraser', '|',
                'symbol'
            ],
            "buttonsSM": [
                'paragraph', '|',
                'bold',
                'strikethrough',
                'underline',
                'italic', '|',
                'ul',
                'ol', '|',
                'outdent', 'indent', '|',
                'font',
                'fontsize',
                'brush',
                'image',
                'table',
                'link', '|',
                'align', 'undo', 'redo', '|',
                'hr',
                'eraser', '|',
                'symbol'
            ],
            "buttonsXS": [
                'paragraph', '|',
                'bold',
                'strikethrough',
                'underline',
                'italic', '|',
                'table',
                'link', '|',
                'dots']
        });

        const send_content_update = function (event) {
            console.log(event);
            if (typeof window.app !== 'undefined') {
                window.app.setContentUpdate(true);
            }
        };

        const editor_node = document.getElementById("editor");
        editor_node.addEventListener("change", send_content_update);

        getEditorContent = function () {
            return jodit.value;
        };

        setEditorContent = function (content) {

            editor_node.removeEventListener("change", send_content_update);
            jodit.value = content;
            setTimeout(() =>
                editor_node.addEventListener("change", send_content_update)
                , 500);
        };

        // TODO Remove this ASAP
        //setInlineStyle = function (style_name, value) { }

        window.open = function (param) {
            window.app.openURL(param);
        };
    </script>
</body>

</html>